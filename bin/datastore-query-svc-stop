#!/usr/bin/env bash

LOCKFILE=~/datastore/datastore-deployment/var/lock/datastore-service.pid

if [ ! -f "$LOCKFILE" ]; then
    echo "$LOCKFILE does not exist, don't know process id to kill"
    exit 1
fi

# stop datastore-service using pid in ~/datastore/datastore-deployment/var/lock/datastore-service.pid
PID=`cat "$LOCKFILE"`
echo "killing process id: $PID"
kill $PID || { echo "failed to kill process id: $PID"; exit 1; }

echo "removing lock file: $LOCKFILE"
rm "$LOCKFILE" || { echo "failed to remove: $LOCKFILE"; exit 1; }

